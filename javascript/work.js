var teacher_work = {
"Dr_Zamora":{'teacher_name': 'Dr. Zamora', 'grade': '5A', 'email': 'azamoraoviedo@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/10kFarbKZ1aWfo9KLcI1U9V6N0BL7KvdX2w-u9Em6GDQ/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/10kFarbKZ1aWfo9KLcI1U9V6N0BL7KvdX2w-u9Em6GDQ/edit']}},
"Mr_Aguilera":{'teacher_name': 'Mr. Aguilera', 'grade': 'PK3', 'email': 'joaguilera@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1s22KmY9PyPFuAW5dpmcuBOb4AFzLgWPEW8_spmWD1xo/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1s22KmY9PyPFuAW5dpmcuBOb4AFzLgWPEW8_spmWD1xo/edit']}},
"Mr_Cocco":{'teacher_name': 'Mr. Cocco', 'grade': 'PKB', 'email': 'acocco@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1s22KmY9PyPFuAW5dpmcuBOb4AFzLgWPEW8_spmWD1xo/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1s22KmY9PyPFuAW5dpmcuBOb4AFzLgWPEW8_spmWD1xo/edit']}},
"Mr_Galvan":{'teacher_name': 'Mr. Galvan', 'grade': '3C', 'email': 'omgalvan@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1UImY-z3lM8xNzUQ7WPUu5v0x1eZi8GxPKrBTAjdh4DA/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1UImY-z3lM8xNzUQ7WPUu5v0x1eZi8GxPKrBTAjdh4DA/edit']}},
"Mr_Morrow":{'teacher_name': 'Mr. Morrow', 'grade': 'Art', 'email': 'domorrow@dallasisd.org'},
"Mr_Nickson":{'teacher_name': 'Mr. Nickson', 'grade': 'FLS', 'email': 'snickson@dallasisd.org'},
"Mr_Vera":{'teacher_name': 'Mr. Vera', 'grade': '4B', 'email': 'anvera@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1kodYYcTlNS_WkWkEcrMpJcO2lUwB_aZ1uFGAEyAgopc/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1kodYYcTlNS_WkWkEcrMpJcO2lUwB_aZ1uFGAEyAgopc/edit']}},
"Ms_Beaver":{'teacher_name': 'Ms. Beaver', 'grade': 'PPCDB', 'email': 'lbeaver@dallasisd.org'},
"Ms_Bishop":{'teacher_name': 'Ms. Bishop', 'grade': 'Music', 'email': 'rdbishop@dallasisd.org'},
"Ms_Cooper":{'teacher_name': 'Ms. Cooper', 'grade': 'Library', 'email': 'cocooper@dallasisd.org'},
"Ms_Escobedo":{'teacher_name': 'Ms. Escobedo', 'grade': '1B', 'email': 'vescobedo@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1QNALhcc3xsJtlQaYAuPsfkHnJeWCdBDDq26gbEcV_OM/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1QNALhcc3xsJtlQaYAuPsfkHnJeWCdBDDq26gbEcV_OM/edit']}},
"Ms_Figueroa":{'teacher_name': 'Ms. Figueroa', 'grade': '2A', 'email': 'dfreytes@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1kodYYcTlNS_WkWkEcrMpJcO2lUwB_aZ1uFGAEyAgopc/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1kodYYcTlNS_WkWkEcrMpJcO2lUwB_aZ1uFGAEyAgopc/edit']}},
"Ms_Fisher":{'teacher_name': 'Ms. Fisher', 'grade': 'FLS', 'email': 'chrfisher@dallasisd.org'},
"Ms_Gonzalez":{'teacher_name': 'Ms. Gonzalez', 'grade': '3B', 'email': 'mcosme@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1UImY-z3lM8xNzUQ7WPUu5v0x1eZi8GxPKrBTAjdh4DA/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1UImY-z3lM8xNzUQ7WPUu5v0x1eZi8GxPKrBTAjdh4DA/edit']}},
"Ms_Gutierrez":{'teacher_name': 'Ms. Gutierrez', 'grade': '1C', 'email': 'bragutierrez@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1QNALhcc3xsJtlQaYAuPsfkHnJeWCdBDDq26gbEcV_OM/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1QNALhcc3xsJtlQaYAuPsfkHnJeWCdBDDq26gbEcV_OM/edit']}},
"Ms_Hernandez":{'teacher_name': 'Ms. Hernandez', 'grade': 'KB', 'email': 'mhernandezramirez@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1Daf2Pn23Qyq5G6ja5os7yWdcJR8u1Eolj7eQIJavNzo/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1Daf2Pn23Qyq5G6ja5os7yWdcJR8u1Eolj7eQIJavNzo/edit']}},
"Ms_Hortelanos":{'teacher_name': 'Ms. Hortelanos', 'grade': '2B', 'email': 'mhortelanogarcia@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1kodYYcTlNS_WkWkEcrMpJcO2lUwB_aZ1uFGAEyAgopc/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1kodYYcTlNS_WkWkEcrMpJcO2lUwB_aZ1uFGAEyAgopc/edit']}},
"Ms_Johnson":{'teacher_name': 'Ms. Johnson', 'grade': 'PKC', 'email': 'margjohns@dallasisd.org'},
"Ms_Lee":{'teacher_name': 'Ms. Lee', 'grade': '5C', 'email': 'jennilee@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/10kFarbKZ1aWfo9KLcI1U9V6N0BL7KvdX2w-u9Em6GDQ/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/10kFarbKZ1aWfo9KLcI1U9V6N0BL7KvdX2w-u9Em6GDQ/edit']}},
"Ms_Lingow":{'teacher_name': 'Ms. Lingow', 'grade': 'PKA', 'email': 'vlingow@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1s22KmY9PyPFuAW5dpmcuBOb4AFzLgWPEW8_spmWD1xo/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1s22KmY9PyPFuAW5dpmcuBOb4AFzLgWPEW8_spmWD1xo/edit']}},
"Ms_Lopez":{'teacher_name': 'Ms. Lopez', 'grade': '5B', 'email': 'hylopez@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/10kFarbKZ1aWfo9KLcI1U9V6N0BL7KvdX2w-u9Em6GDQ/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/10kFarbKZ1aWfo9KLcI1U9V6N0BL7KvdX2w-u9Em6GDQ/edit']}},
"Ms_Manning":{'teacher_name': 'Ms. Manning', 'grade': 'PE', 'email': 'vmanning@dallasisd.org'},
"Ms_Medrano":{'teacher_name': 'Ms. Medrano', 'grade': 'KA', 'email': 'clmedrano@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1Daf2Pn23Qyq5G6ja5os7yWdcJR8u1Eolj7eQIJavNzo/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1Daf2Pn23Qyq5G6ja5os7yWdcJR8u1Eolj7eQIJavNzo/edit']}},
"Ms_Neil":{'teacher_name': 'Ms. Neil', 'grade': '1A', 'email': 'mneil@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1QNALhcc3xsJtlQaYAuPsfkHnJeWCdBDDq26gbEcV_OM/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1QNALhcc3xsJtlQaYAuPsfkHnJeWCdBDDq26gbEcV_OM/edit']}},
"Ms_Nolan":{'teacher_name': 'Ms. Nolan', 'grade': '2C', 'email': 'chrodgers@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1gz5-G9NpoOVN7uWfamQkxEBBtR1H8ZOftVTBgIPJs_I/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1gz5-G9NpoOVN7uWfamQkxEBBtR1H8ZOftVTBgIPJs_I/edit']}},
"Ms_Parra":{'teacher_name': 'Ms. Parra', 'grade': 'Dyslexia', 'email': 'cperea@dallasisd.org'},
"Ms_Pooler":{'teacher_name': 'Ms. Pooler', 'grade': 'PPCDA', 'email': 'tpooler@dallasisd.org'},
"Ms_Reyes":{'teacher_name': 'Ms. Reyes', 'grade': '4A', 'email': 'cecreyes@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1kodYYcTlNS_WkWkEcrMpJcO2lUwB_aZ1uFGAEyAgopc/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1kodYYcTlNS_WkWkEcrMpJcO2lUwB_aZ1uFGAEyAgopc/edit']}},
"Ms_Rios":{'teacher_name': 'Ms. Rios', 'grade': 'Inclusion', 'email': 'grrios@dallasisd.org'},
"Ms_Russell":{'teacher_name': 'Ms. Russell', 'grade': 'KC', 'email': 'torussel@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1Daf2Pn23Qyq5G6ja5os7yWdcJR8u1Eolj7eQIJavNzo/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1Daf2Pn23Qyq5G6ja5os7yWdcJR8u1Eolj7eQIJavNzo/edit']}},
"Ms_Stewart":{'teacher_name': 'Ms. Stewart', 'grade': 'PKC', 'email': 'kastewart@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1s22KmY9PyPFuAW5dpmcuBOb4AFzLgWPEW8_spmWD1xo/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1s22KmY9PyPFuAW5dpmcuBOb4AFzLgWPEW8_spmWD1xo/edit']}},
"Ms_Valero":{'teacher_name': 'Ms. Valero', 'grade': 'TAG', 'email': 'acolon@dallasisd.org'},
"Ms_Vaquerano":{'teacher_name': 'Ms. Vaquerano', 'grade': '3A', 'email': 'jvaqerano@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1UImY-z3lM8xNzUQ7WPUu5v0x1eZi8GxPKrBTAjdh4DA/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1UImY-z3lM8xNzUQ7WPUu5v0x1eZi8GxPKrBTAjdh4DA/edit']}},
"Ms_Veasna":{'teacher_name': 'Ms. Veasna', 'grade': '4C', 'email': 'vkok@dallasisd.org', 'work': {'en': ['text__Week of 3/30 to 4/3', 'link__https://docs.google.com/document/d/1kodYYcTlNS_WkWkEcrMpJcO2lUwB_aZ1uFGAEyAgopc/edit'], 'es': ['text__Semana de 3/30 a 4/3', 'link__https://docs.google.com/document/d/1kodYYcTlNS_WkWkEcrMpJcO2lUwB_aZ1uFGAEyAgopc/edit']}},
"Ms_White":{'teacher_name': 'Ms. White', 'grade': 'Speech', 'email': 'cwhite@dallasisd.org'}}



//##

var text_files = {
"menu_text":{'en': {'buster': 'Weekly Boredom Buster', 'news': 'Weekly News Letter', 'grades': 'Weekly Work', 'online': 'Remote Learning FAQ'}, 'es': {'buster': 'Reto Semanal Para no Aburrirse', 'news': 'Noticiero Semanal', 'grades': 'Trabajo de la Semana', 'online': 'Ayuda para Aprender de Casa'}}}




special_text = 'text__';
special_video = 'video__';
special_link = 'link__';
special_download = 'download__'

function remove_page(key){
	url = window.location.href
	last_sl = url.lastIndexOf(key)
	return url.substring(0,last_sl+1)
}

function extract_var(name){
	var url = window.location.href
	var first_q = url.indexOf('html?')

	var all_vars = url.substring(first_q+1, url.length)

	var useful_var = all_vars.indexOf(name)
	var next_var = all_vars.indexOf('?',useful_var)
	if (next_var == -1){
		next_var = all_vars.length
	}

	var value = all_vars.substring(useful_var + name.length+1,next_var)

	return value
}

function string_to_var(name){
	return name.replace(/ /g, "_");
}

function string_to_html(text){
	var open = false;
	replaced_string = "";
	for (var i = 0; i < text.length; i++) {
		if(text.charAt(i) == '*' && !open){
			replaced_string += '<b>';
			open = true;
		} else if (text.charAt(i) == '*' && open) {
			replaced_string += '</b>';
			open = false;
		} else{
			replaced_string += text.charAt(i);
		}
	}
	return replaced_string;
}

function setup_page(language){
	if(language == 'en'){
		$('.lang').html('<h5>A Espa&#xf1;ol</h5>');
	} else {
		$('.lang').html('<h5>To English</h5>');
	}

	// Setting up Menu
	$('#buster').html(text_files['menu_text'][language]['buster']);
	$('#news').html(text_files['menu_text'][language]['news']);
	$('#grades').html(text_files['menu_text'][language]['grades']);
	$('#online').html(text_files['menu_text'][language]['online']);
	if(language == 'en'){
		$('#counsel').html('Counseling Services');
	}else{
		$('#counsel').html('Servicios de Consejeria');
	}
}

$(document).ready(function(){
	var curr_url = window.location.href
	if(!(curr_url.includes('?lang='))){
		curr_url = window.location.href + '?lang=en';
		window.location.href = curr_url;
	}
	var lang = extract_var('lang');
	setup_page(lang);


	$(".logo").click(function(){
		grade_clicked = $(this).attr('id');

		window.location.href='https://www.dallasisd.org/hawthorne';
	});
	$(".school_name").click(function(){
		grade_clicked = $(this).attr('id');

		window.location.href=remove_page('/')+'index.html?lang='+lang;
	});

	$(".lang").click(function(){
		lang = extract_var('lang')
		if(lang == 'en'){
			new_lang = 'es';
		} else {
			new_lang = 'en';
		}
		curr_url = window.location.href
		base = remove_page('?lang=')
		base = base.substring(0,base.length-1)
		vars = curr_url.substring(base.length,curr_url.length);
		if(vars.startsWith('?lang=')){
			vars = vars.substring(8,vars.length);
		}
		window.location.href=base+'?lang='+new_lang+vars
	});

	var timer;
	$(".menu_button").hover(function(){
		$(this).css('display','auto');
		clearTimeout(timer);
		$('.nav').removeClass('invisible');
	}, function(){
		timer = setTimeout(function() {
        $('.nav').addClass('invisible');
    }, 100);
	});





	$('#buster').click(function(){
		window.location.href = remove_page('/')+ 'buster.html?lang='+lang;
	});
	$('#news').click(function(){
		window.location.href = remove_page('/')+ 'news_letter.html?lang='+lang;
	});

	$('#grades').click(function(){
		window.location.href = remove_page('/')+ 'grade.html?lang='+lang;
	});
	$('#online').click(function(){
		window.location.href = remove_page('/')+ 'faq.html?lang='+lang;
	});
	$('#counsel').click(function(){
		window.location.href = "https://sites.google.com/dallasisd.org/kariskounselingkorner/home";
	});


	// Teacher Code
	teacher_name = extract_var('teacher');
	var_name = string_to_var(teacher_name);
	json_document = teacher_work[teacher_name];
	html_doc = '<h2>'+json_document['teacher_name']+'</h2>'
	html_doc += '<h2>'+json_document['grade']+'</h2>'
	html_doc += '<h2>'+json_document['email']+'</h2><br>'


	lang = extract_var('lang');
	if(json_document.hasOwnProperty('work')){
		all_work = json_document['work'][lang];
		for(var work_id = 0; work_id < all_work.length; work_id++){
			console.log(all_work[work_id]);
			if(all_work[work_id].startsWith(special_text)){
				text = all_work[work_id].substring(special_text.length);
				if(text.length == 0){
					html_doc += "<br>";
				}
				else{
					html_doc += '<h3>'+string_to_html(text)+'</h3>';
				}
			}
			else if(all_work[work_id].startsWith(special_link)){
				link = all_work[work_id].substring(special_link.length);
				if(lang == 'en'){
					html_doc+='<a class="link" href="'+link+'"><h3>Click Here</h3></a><br>'
				}else{
					html_doc+='<a class="link" href="'+link+'"><h3>Haz Click Aqui</h3></a><br>'
				}

			}
			else if(all_work[work_id].startsWith(special_video)){
				link = all_work[work_id].substring(special_video.length);
				link = 'teachers/'+var_name+'/'+link
				html_doc+='<video controls><source src="'+link+'" type="video/mp4">There was an issue loading the video...</video>'
			}
			else if(all_work[work_id].startsWith(special_download)){
				link_name = all_work[work_id].substring(special_download.length);
				link = 'teachers/'+var_name+'/'+link_name
				html_doc+='<a href="'+link+'" download="work_file"><h3>Download Me</h3></a><br>'
			}
		}
	}
	$('.work_container').html(html_doc);
});
